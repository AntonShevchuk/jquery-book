# 70% AJAX {#70-ajax}

Что такое AJAX я думаю рассказывать не стоит, ибо с приходом веб-два-нуля большинство пользователей уже воротят носом от перезагрузок страниц целиком, а с появлением jQuery реализация упростилась в разы…

Начнем с самого простого – загрузка HTML кода в необходимый нам DOM элемент на странице. Для этой цели нам подойдет метод «.load()». Данный метод может принимать следующие параметры:

url – запрашиваемой страницы

data – передаваемые данные (необязательный параметр)

callback – функция которая будет вызвана при завершении запроса к серверу (необязательный параметр)

Теперь на примерах:

// в элемент с id=content будет вставлен весь HTML с указанной страницы

$("#content").load("/get-my-page.html");

// в элемент с id=content будет вставлен HTML с указанной страницы

// выбранный по указанному селектору #wrapper

$("#content").load("/get-my-page.html #wrapper");

// передаем данные на сервер

$("#content").load("/get-my-page.html", {id:42});

// обрабатываем полученные данные

$("#content").load("/get-my-page.html", function(){

alert("Ничего оригинальней не придумал");

});

_Из моего опыта работы – вам очень часто придётся пользоваться методом «.load()» как описано в первом примере, а ещё советую запомнить второй пример, он может выручить, когда надо реализовать загрузку AJAX’ом, а доступа к сервер-сайду у вас нет или он ограничен._

Живой пример можно пощупать на страничке – [_ajax.load.html_](http://anton.shevchuk.name/book/code/ajax.load.html)

_Следующий метод с которым я вас познакомлю будет «_$.ajax()» _– собственно, он тут главный, и все остальные AJAX методы являются лишь обёрткой (и «_.load()» _в том же числе). Метод «_$.ajax()» _принимает в качестве параметра пачку настроек и URL куда стучаться, приведу пример аналогичный вызову «_.load()»:

_$._ajax_({_

_url:_ "/get-my-page.html"_,_ // указываем URL

_method:_ "GET"_,_ // HTTP метод, по умолчанию GET

_data: {_"id": 42}_,_ // данные, которые отправляем на сервер

_dataType:_ "html"_,_ // тип данных загружаемых с сервера

_success:_ function _(data) {_

// вешаем свой обработчик события success

$("#content").html(data)

_}_

_});_

_Тут мы обрабатывали HTML ответ от сервера – это хорошо когда нам полстраницы обновить надо, но данные лучше передавать в «правильном» формате – это XML – понятно, структурировано, и избыточно, и как-то не совсем JavaScript-way, и поэтому наш выбор – это_ [JSON](http://ru.wikipedia.org/wiki/JSON) _(wikipedia в помощь):_

_{_

"note"_: {_

"time"_:_"2012.09.21 13:11:15"_,_

"text"_:_"Рассказать про JSONP"

_}_

_}_

_Фактически это и есть JavaScript код как есть (JavaScript Object Notation если быть придирчиво точным), при этом формат уже распространён настолько, что работа с данными в другом формате уже не комильфо._

_Жизнь не стоит на месте, есть и более удобные форматы, но не в JavaScript’е :)_

Для загрузки JSON существует быстрая функция-синоним – «jQuery.getJSON()» – в качестве обязательного параметра лишь ссылка, куда стучимся, опционально можно указать данные, для передачи на сервер и функцию обратного вызова

_Нельзя просто так взять и описать все возможные параметры для вызова «$.ajax()», таки стоит держать официальный мануал под рукой –_ [_http://api.jquery.com/jQuery.ajax/_](http://api.jquery.com/jQuery.ajax/)

Ещё есть пару-тройку функций, которые стоит упомянуть:

get(_url, data, success, dataType_) — загружает данные методом GET

post(_url, data, success, dataType_) — загружает данные методом POST

getScript(_url, success_) — загружает JavaScript с сервера методом GET

Все они, как я уже говорил ранее, лишь обёртки над вызовом «$.ajax()», в чём не сложно убедиться заглянув в исходный код библиотеки, и там, на строчках с 9 137 по 9 156, вы найдёте реализацию методов «$.get()» и «$.post()» :)

Данная информация актуальна для jQuery версии 3.1.0

Я неспроста оставляю так много места под ваши заметки:..