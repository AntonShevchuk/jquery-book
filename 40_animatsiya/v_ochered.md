## В очередь…<sup>©</sup>

Немного об очередности работы метода «.animate()» – большинство читателей, наверное, уже знакомо с организацией последовательной анимации – для этого мы можем использовать цепочку вызовов:

$(&#039;#box &#039;)

// говорим что меняем

.animate({left:&#039;+=100&#039;})

// следующий вызов добавляется в очередь на выполнение

.animate({top:&#039;+=100&#039;})

Для параллельного запуска анимации, необходимо будет внести следующие изменения:

$(&#039;#box&#039;)

// говорим что меняем

.animate({left:&#039;+=100&#039;})

// следующий вызов будет игнорировать очередь

.animate({top:&#039;+=100&#039;}, {queue:false})

Есть ещё чудесная функция «.stop()», которая позволяет остановить текущую анимацию на полпути, а так же почистить очередь при необходимости. Для обеспечения различного поведения функции, она принимает три параметра:

queue — имя очереди; для работы с очередью анимации «fx» данный параметр опускаем («fx» – очередь по умолчанию)

clearQueue — флаг очистки очереди

jumpToEnd — применить результат анимации али нет

// останавливаем выполнение текущей анимации

$(&#039;#box&#039;).stop();

// останавливаем выполнение текущей анимации

// и всех последующих (чистим очередь)

$(&#039;#box&#039;).stop(true);

// останавливаем выполнение текущей анимации и всех последующих

// но применяем результат текущей

$(&#039;#box&#039;).stop(true, true);

// останавливаем выполнение только текущей анимации

// и применяем её результат

$(&#039;#box&#039;).stop(false, true);

Пример есть, и требует ваших проб и ошибок – [animate.queue.html](http://anton.shevchuk.name/book/code/animate.queue.html)

_Заметка на будущее: если вы сделали выпадающее меню, и поигравшись с мышкой оно продолжает выпадать и исчезать, то значит надо вставить «.stop()» в обработчик события_

По умолчанию вся анимация над объектом складывается в очередь «fx», но с версии 1.7 можно указывать произвольную очередь:

$(&#039;#box&#039;)

.animate({&#039;left&#039;:&#039;-=100&#039;}, {queue:&#039;x&#039;}) // составляем очередь X

.dequeue(&#039;x&#039;) // запускаем очередь X

$(&#039;#box&#039;).stop(&#039;x&#039;) // останавливаем анимацию в очереди X

Для чего нам может понадобиться произвольная очередь? Да для распараллеливания анимации, чтобы мы могли запустить одну очередь анимации, и в любой другой момент запустить другую очередь, возможно, это заклад под игры? Но чего гадать, давайте смотреть — [animate.game.html](http://anton.shevchuk.name/book/code/animate.game.html)