## В очередь…<sup>©</sup>

Немного об очередности работы метода «.animate()» – большинство читателей, наверное, уже знакомо с организацией последовательной анимации – для этого мы можем использовать цепочку вызовов:

```javascript
// находим нужный элемент
$('#box ')
  // указываем что хотим анимировать
  .animate({left:'+=100'})
  // следующий вызов анимации добавляется в очередь на выполнение
  .animate({top:'+=100'})
```

Для параллельного запуска анимации, необходимо будет внести следующие изменения:

```javascript
// находим нужный элемент
$('#box')
  // указываем что хотим анимировать
  .animate({left:'+=100'})
  // следующий вызов анимации будет игнорировать очередь
  .animate({top:'+=100'}, {queue:false})
```

Есть ещё чудесная функция «.stop()», которая позволяет остановить текущую анимацию на полпути, а так же почистить очередь при необходимости. Для обеспечения различного поведения функции, она принимает три параметра:

`queue` — имя очереди; для работы с очередью анимации «fx» данный параметр опускаем («fx» – очередь по умолчанию)

`clearQueue` — флаг очистки очереди

`jumpToEnd` — применить результат анимации али нет


```javascript
// останавливаем выполнение текущей анимации
$('#box').stop();

// останавливаем выполнение текущей анимации
// и всех последующих (чистим очередь)
$('#box').stop(true);

// останавливаем выполнение текущей анимации и всех последующих
// но применяем результат текущей
$('#box').stop(true, true);

// останавливаем выполнение только текущей анимации
// и применяем её результат
$('#box').stop(false, true);
```

Пример есть, и требует ваших проб и ошибок – [animate.queue.html](http://anton.shevchuk.name/book/code/animate.queue.html)

_Заметка на будущее: если вы сделали выпадающее меню, и поигравшись с мышкой оно продолжает выпадать и исчезать, то значит надо вставить «.stop()» в обработчик события_

По умолчанию вся анимация над объектом складывается в очередь «fx», но с версии 1.7 можно указывать произвольную очередь:


```javascript
$('#box')
  .animate({'left':'-=100'}, {queue:'x'}) // составляем очередь X
  .dequeue('x') // запускаем очередь X

$('#box').stop('x') // останавливаем анимацию в очереди X
```

Для чего нам может понадобиться произвольная очередь? Да для распараллеливания анимации, чтобы мы могли запустить одну очередь анимации, и в любой другой момент запустить другую очередь, возможно, это заклад под игры? Но чего гадать, давайте смотреть — [animate.game.html](http://anton.shevchuk.name/book/code/animate.game.html)
