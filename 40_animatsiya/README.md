# 40% Анимация {#40}

Библиотека jQuery позволяет очень легко анимировать DOM элементы, для этого предусмотрено несколько функций, но обо всём по порядку, начнём с простого «.hide()» и «.show()», эти два метода соответственно скрывают либо отображают элементы:

```javascript
// скроем все картинки
$('img').hide();

// теперь вернём их на место
$('img').show();
```

Данные вызовы оперируют лишь CSS атрибутом «display» и переключают его из текущего состояния в «none» и обратно. В качестве первого параметра можно задать скорость анимации, для этого можно использовать одно из зарезервированных слов «slow» или «fast», либо же указывать скорость в миллисекундах (1000 мс = 1 сек):

```javascript
// медленно спускаемся с горы и… скрываем все картинки
// **slow == 600**
// **fast == 200**
$('img').hide('slow');

// теперь вернём их на место, чуть быстрее
$('img').show(400);
```

В таком случае, исчезновение элементов будет сопровождаться анимацией атрибутов «width», «height», «opacity» и прочих (см. пример в [hide.html](http://anton.shevchuk.name/book/code/hide.html)). В довесок к этим двум методам есть ещё метод «.toggle()», он работает как переключатель «hide → show» или «show → hide».

Теперь идём немножко дальше – вторым параметром в приведенных методах может быть callback-функция – она будет выполнена по окончанию анимации элементов:

```javascript
// скрываем все картинки
$('img').hide('slow', function(){
    // опосля отображаем alert
    alert("Images was hidden");
});
```

Приведу иллюстрацию для наглядности процесса анимации:

Рисунок — анимация show()

_Анимацию таких атрибутов как «height», «width» и «opacity» видно невооружённым взглядом, в действительности же это далеко не всё, заглянув внутрь jQuery можно увидеть, что так же изменяются внутренние и внешние отступы – «padding» и «margin» – так что не стоит об этом забывать._

Идём дальше – у нас на очереди набор методов из семейства slide – «.slideUp()», «.slideDown()» и «.slideToggle()». Их поведение схоже с предыдущими функциями, но анимация будет затрагивать лишь высоту блоков – смотрим пример [slide.html](http://anton.shevchuk.name/book/code/slide.html) (ну и иллюстрации так же есть):

Рисунок — анимация slideDown()

Прежде чем перейти к десерту упомяну семейство функций fade — они манипулируют лишь «opacity»:

`fadeIn(duration, callback)` – изменяет «opacity» от 0 до предыдущего

`fadeOut(duration, callback)` – изменяет «opacity» от текущего до 0

`fadeToggle(duration, callback)` – переключатель между «In» и «Out»

`fadeTo(duration, opacity, callback)` – изменяет значение «opacity» до требуемого значения

А теперь самое сладкое – все эффекты анимации в jQuery крутятся вокруг метода «.animate()». Данная функция берет один или несколько CSS-свойств элемента и изменяет их от исходного до заданного за N-ое количество итераций (количество итераций зависит от указанного времени, но не реже одной итерации в 13мс, если я правильно накопал это значение). Ну что-же, от слов к делу, попробуем реализовать функции «.fadeIn()» и «.fadeout()» с помощью «.animate()» (см. пример [animate.html](http://anton.shevchuk.name/book/code/animate.html)):

```javascript
// fadeOut()
$('article img').animate({
    'opacity':'hide'
})

// fadeIn()
$('article img').animate({
    'opacity':'show'
})
```

Всё просто, давайте-ка теперь усложним задачу – изменим размер блоков и прозрачность:

```javascript
// значения указанных свойств будут плавно изменяться
// от текущих до заданных
$('article img').animate({
    'opacity':0.5,
    'height':'50px',
    'width':'250px'
})
```

Как видите – тоже несложно, теперь попробуем отталкиваться от текущих значений, а не задавать необходимые:

```javascript
// изменяем, шаг за шагом
$('article img').animate({
    'opacity':'-=0.1',
    'height':'+=10px'
})
```

Поигрались и хватит, пора усложнить вам жизнь – у метода «.animate()» может быть более одного параметра, и пора приступить к их разбору. Набор параметров может быть разным, приведу первый, тот, что попроще:

params – CSS свойства – с этим мы уже познакомились

duration – скорость анимации, уже упоминалась ранее, указывается в миллисекундах, или используя ключевые слова «fast» или «slow»

easing – указываем какую функцию будем использовать для изменения значений

callback – функция, которая будет вызвана после окончания анимации

Из приведённых параметров нам только «easing» не встречался ранее – я его берёг на сейчас – этот параметр указывает, какая функция будет использоваться для процесса анимации значений. Это могут быть линейные, квадратичные, кубически и любые другие функции. «Из коробки» мы можем выбрать лишь между «linear» и «swing»:

| Рисунок — easing «linear» | Рисунок — easing «swing» |
| --- | --- |

Заглянув в код jQuery мы легко найдём соответствующий код:

```javascript
{
    linear: function(p) {
        return p;
    },
    swing: function(p) {
        return 0.5 - Math.cos( p*Math.PI ) / 2;
    }
}
```

_p – коэффициент прохождения анимации, изменяется от 0 до 1_

_Сложно? Хотите больше и сразу? Тогда ищите easing plugin на странице [http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/), он действительно из разряда «must have»._

_Подключайте и используйте одну из трёх десятков функций easing (наглядно, с иллюстрациями – [animate.easing.html](http://anton.shevchuk.name/book/code/animate.easing.html), а так же [http://easings.net/](http://easings.net/))_

Но давайте вернёмся к методу «.animate()», которая в качестве параметров может принимать ещё один набор параметров, который уже не будет казаться таким простым:

`params` – CSS свойства (уже было)

`options` – тут целый набор возможностей, часть уже описывалась ранее:

`duration` – скорость анимации

`easing` – функция («linear» или «swing»)

`complete` – функция, которая будет вызвана после окончания анимации

`step` – функция, которая будет вызвана на каждом шаге анимации, о ней расскажу чуть ниже

`queue` – флаг/параметр очереди, чуть позже опишу подробнее

`specialEasing` – хэш в котором можно описать какую именно easing функцию следует использовать для изменения определённых параметров
